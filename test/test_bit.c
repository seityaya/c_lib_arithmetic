//Author                 : Seityagiya Terlekchi
//Contacts               : seityaya@ukr.net
//Creation Date          : 2023.01
//License Link           : https://spdx.org/licenses/LGPL-2.1-or-later.html
//SPDX-License-Identifier: LGPL-2.1-or-later
//Copyright Â© 2023-2023 Seityagiya Terlekchi. All rights reserved.

#include "test.h"
#include "yaya_bit.h"

UT_FUNC_GEN(test_bit) {
    UT_GROUP_BEG(bit) {
        UT_GROUP_BEG(0) {

            UT_GROUP_BEG(eql) {
                UT_ASSERT_BIT_EQUAL(i08c(  0), i08c(0b00000000));
                UT_ASSERT_BIT_EQUAL(u08c(  0), u08c(0b00000000));
                UT_ASSERT_BIT_EQUAL(i08c(  1), i08c(0b00000001));
                UT_ASSERT_BIT_EQUAL(u08c(  1), u08c(0b00000001));
                UT_ASSERT_BIT_EQUAL(i08c( -1), i08c(0b11111111));
                UT_ASSERT_BIT_EQUAL(u08c(255), u08c(0b11111111));
                UT_ASSERT_BIT_EQUAL(i08c( -1), i08c(0b111111111));
                UT_ASSERT_BIT_EQUAL(u08c(255), u08c(0b111111111));
                UT_ASSERT_BIT_EQUAL(u08c(256), u08c(0b000000000));
            }UT_GROUP_END;

            UT_GROUP_BEG(beg) {
                UT_ASSERT_BIT_EQUAL(i08c(1), BIT_0_BEG(u08c(0b00000000)));
                UT_ASSERT_BIT_EQUAL(i08c(2), BIT_0_BEG(u08c(0b00000001)));
                UT_ASSERT_BIT_EQUAL(i08c(1), BIT_0_BEG(u08c(0b00000010)));
                UT_ASSERT_BIT_EQUAL(i08c(1), BIT_0_BEG(u08c(0b00000110)));
                UT_ASSERT_BIT_EQUAL(i08c(1), BIT_0_BEG(u08c(0b10000000)));
                UT_ASSERT_BIT_EQUAL(i08c(1), BIT_0_BEG(u08c(0b11000000)));
                UT_ASSERT_BIT_EQUAL(i08c(3), BIT_0_BEG(u08c(0b00000011)));
                UT_ASSERT_BIT_EQUAL(i08c(4), BIT_0_BEG(u08c(0b00000111)));
                UT_ASSERT_BIT_EQUAL(i08c(4), BIT_0_BEG(u08c(0b11100111)));
                UT_ASSERT_BIT_EQUAL(i08c(4), BIT_0_BEG(u08c(0b11110111)));
                UT_ASSERT_BIT_EQUAL(i08c(7), BIT_0_BEG(u08c(0b00111111)));
                UT_ASSERT_BIT_EQUAL(i08c(8), BIT_0_BEG(u08c(0b01111111)));
                UT_ASSERT_BIT_EQUAL(i08c(0), BIT_0_BEG(u08c(0b11111111)));
            } UT_GROUP_END;

            UT_GROUP_BEG(end) {
                UT_ASSERT_BIT_EQUAL(i08c(0), BIT_0_END(u08c(0b11111111)));
                UT_ASSERT_BIT_EQUAL(i08c(1), BIT_0_END(u08c(0b11111110)));
                UT_ASSERT_BIT_EQUAL(i08c(2), BIT_0_END(u08c(0b11111100)));
                UT_ASSERT_BIT_EQUAL(i08c(2), BIT_0_END(u08c(0b11111101)));
                UT_ASSERT_BIT_EQUAL(i08c(3), BIT_0_END(u08c(0b11111011)));
                UT_ASSERT_BIT_EQUAL(i08c(8), BIT_0_END(u08c(0b01111111)));
                UT_ASSERT_BIT_EQUAL(i08c(6), BIT_0_END(u08c(0b11000000)));
                UT_ASSERT_BIT_EQUAL(i08c(6), BIT_0_END(u08c(0b11000011)));
                UT_ASSERT_BIT_EQUAL(i08c(8), BIT_0_END(u08c(0b00000000)));
                UT_ASSERT_BIT_EQUAL(i08c(8), BIT_0_END(u08c(0b00000001)));
                UT_ASSERT_BIT_EQUAL(i08c(7), BIT_0_END(u08c(0b10000000)));
                UT_ASSERT_BIT_EQUAL(i08c(8), BIT_0_END(u08c(0b01111111)));
            } UT_GROUP_END;

            UT_GROUP_BEG(cnt) {
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_0_CNT(u32c(0xFFFFFFFF)));
                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_0_CNT(u32c(0xFFFFFF00)));
                UT_ASSERT_BIT_EQUAL(i08c(32), BIT_0_CNT(u32c(0x00000000)));
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_0_CNT(u08c(0x000000FF)));

                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_0_CNT(u08c(0b00000000)));
                UT_ASSERT_BIT_EQUAL(i08c( 7), BIT_0_CNT(u08c(0b00000001)));
                UT_ASSERT_BIT_EQUAL(i08c( 6), BIT_0_CNT(u08c(0b00000101)));
            } UT_GROUP_END;

            UT_GROUP_BEG(pos) {
                UT_ASSERT_BIT_EQUAL(i08c(-1), BIT_0_POS(u08c(0b00000000)));
                UT_ASSERT_BIT_EQUAL(i08c(-1), BIT_0_POS(u08c(0b00000001)));
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_0_POS(u08c(0b11111111)));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_0_POS(u08c(0b11111110)));
                UT_ASSERT_BIT_EQUAL(i08c( 2), BIT_0_POS(u08c(0b11111101)));
                UT_ASSERT_BIT_EQUAL(i08c(-1), BIT_0_POS(u08c(0b10101111)));
            } UT_GROUP_END;
        } UT_GROUP_END;

        UT_GROUP_BEG(1) {
            UT_GROUP_BEG(beg) {
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_1_BEG(0b00000000));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_BEG(0b00000001));
                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_1_BEG(0b10000000));
                UT_ASSERT_BIT_EQUAL(i08c( 2), BIT_1_BEG(0b00000010));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_BEG(0b00000011));
                UT_ASSERT_BIT_EQUAL(i08c( 2), BIT_1_BEG(0b00000110));
                UT_ASSERT_BIT_EQUAL(i08c( 7), BIT_1_BEG(0b11000000));
                UT_ASSERT_BIT_EQUAL(i08c( 4), BIT_1_BEG(0b00001000));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_BEG(0b10011001));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_BEG(0b11111111));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_BEG(0xFFFFFFFF));
                UT_ASSERT_BIT_EQUAL(i08c(32), BIT_1_BEG(0x80000000));
                UT_ASSERT_BIT_EQUAL(i08c(29), BIT_1_BEG(0xF0000000));
                UT_ASSERT_BIT_EQUAL(i08c(64), BIT_1_BEG(0x8000000000000000));
            } UT_GROUP_END;

            UT_GROUP_BEG(end) {
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_1_END(0b00000000));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_END(0b00000001));
                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_1_END(0b10000000));
                UT_ASSERT_BIT_EQUAL(i08c( 2), BIT_1_END(0b00000010));
                UT_ASSERT_BIT_EQUAL(i08c( 2), BIT_1_END(0b00000011));
                UT_ASSERT_BIT_EQUAL(i08c( 3), BIT_1_END(0b00000110));
                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_1_END(0b11000000));
                UT_ASSERT_BIT_EQUAL(i08c( 4), BIT_1_END(0b00001000));
                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_1_END(0b10011001));
                UT_ASSERT_BIT_EQUAL(i08c( 8), BIT_1_END(0b11111111));
                UT_ASSERT_BIT_EQUAL(i08c(32), BIT_1_END(0xFFFFFFFF));
                UT_ASSERT_BIT_EQUAL(i08c(32), BIT_1_END(0x80000000));
                UT_ASSERT_BIT_EQUAL(i08c(32), BIT_1_END(0xF0000000));
                UT_ASSERT_BIT_EQUAL(i08c(64), BIT_1_END(0x8000000000000000));
            } UT_GROUP_END;

            UT_GROUP_BEG(cnt) {
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_1_CNT(0b00000000));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_CNT(0b00000001));
                UT_ASSERT_BIT_EQUAL(i08c( 2), BIT_1_CNT(0b0000000101));
                UT_ASSERT_BIT_EQUAL(i08c(24), BIT_1_CNT(0xFFFFFF));
            } UT_GROUP_END;

            UT_GROUP_BEG(pos) {
                UT_ASSERT_BIT_EQUAL(i08c( 0), BIT_1_POS(0b00000000));
                UT_ASSERT_BIT_EQUAL(i08c( 1), BIT_1_POS(0b00000001));
                UT_ASSERT_BIT_EQUAL(i08c( 3), BIT_1_POS(0b00000100));
                UT_ASSERT_BIT_EQUAL(i08c(-1), BIT_1_POS(0b00000101));
                UT_ASSERT_BIT_EQUAL(i08c(-1), BIT_1_POS(0b11000101));
            } UT_GROUP_END;
        } UT_GROUP_END;

        UT_GROUP_BEG(get) {
            UT_ASSERT_BIT_EQUAL(0, BIT_GET(0b0001, 0));
            UT_ASSERT_BIT_EQUAL(1, BIT_GET(0b0001, 1));
            UT_ASSERT_BIT_EQUAL(0, BIT_GET(0b0001, 2));
        } UT_GROUP_END;

        UT_GROUP_BEG(set) {
            UT_ASSERT_BIT_EQUAL(0, BIT_SET(0, 0));
            UT_ASSERT_BIT_EQUAL(1, BIT_SET(0, 1));
            UT_ASSERT_BIT_EQUAL(2, BIT_SET(0, 2));
        } UT_GROUP_END;

        UT_GROUP_BEG(res) {
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_RES(0b01110, 0));
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_RES(0b01110, 1));
            UT_ASSERT_BIT_EQUAL(0b01100, BIT_RES(0b01110, 2));
            UT_ASSERT_BIT_EQUAL(0b00110, BIT_RES(0b01110, 4));
        } UT_GROUP_END;

        UT_GROUP_BEG(tog) {
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_TOG(0b01110, 0));
            UT_ASSERT_BIT_EQUAL(0b01111, BIT_TOG(0b01110, 1));
            UT_ASSERT_BIT_EQUAL(0b01100, BIT_TOG(0b01110, 2));
            UT_ASSERT_BIT_EQUAL(0b00110, BIT_TOG(0b01110, 4));
            UT_ASSERT_BIT_EQUAL(0b11110, BIT_TOG(0b01110, 5));
        } UT_GROUP_END;

        UT_GROUP_BEG(wrt) {
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_WRT(0b01110, 0, 0));
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_WRT(0b01110, 1, 0));
            UT_ASSERT_BIT_EQUAL(0b01100, BIT_WRT(0b01110, 2, 0));
            UT_ASSERT_BIT_EQUAL(0b00110, BIT_WRT(0b01110, 4, 0));
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_WRT(0b01110, 5, 0));

            UT_ASSERT_BIT_EQUAL(0b01110, BIT_WRT(0b01110, 0, 1));
            UT_ASSERT_BIT_EQUAL(0b01111, BIT_WRT(0b01110, 1, 1));
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_WRT(0b01110, 2, 1));
            UT_ASSERT_BIT_EQUAL(0b01110, BIT_WRT(0b01110, 4, 1));
            UT_ASSERT_BIT_EQUAL(0b11110, BIT_WRT(0b01110, 5, 1));
        } UT_GROUP_END;

        UT_GROUP_BEG(inv) {
            UT_ASSERT_BIT_EQUAL(u32c(0b11111111111111111111111111111111), BIT_INV(u32c(0b00000000000000000000000000000000)));
            UT_ASSERT_BIT_EQUAL(u32c(0b11111111111111111111111111111110), BIT_INV(u32c(0b00000000000000000000000000000001)));
            UT_ASSERT_BIT_EQUAL(i08c(127), BIT_INV(i08c(-128)));
        } UT_GROUP_END;

        UT_GROUP_BEG(rev) {
            UT_ASSERT_BIT_EQUAL(u32c(0b0), BIT_REV((u32s)0b0));
            UT_ASSERT_BIT_EQUAL(u32c(0b0000000000000001), BIT_REV(u32c(0b10000000000000000000000000000000)));
            UT_ASSERT_BIT_EQUAL(u32c(0b0000000000010001), BIT_REV(u32c(0b10001000000000000000000000000000)));
        } UT_GROUP_END;

        UT_GROUP_BEG(shf_rig) {
            UT_ASSERT_BIT_EQUAL(0b00010, BIT_SHF_RIG(0b00100, 1));
            UT_ASSERT_BIT_EQUAL(0b00101, BIT_SHF_RIG(0b10100, 2));
            UT_ASSERT_BIT_EQUAL(0b00001, BIT_SHF_RIG(0b10100, 4));
        } UT_GROUP_END;

        UT_GROUP_BEG(shf_lef) {
            UT_ASSERT_BIT_EQUAL(0b01000, BIT_SHF_LEF(0b00100, 1));
            UT_ASSERT_BIT_EQUAL(0b10100, BIT_SHF_LEF(0b00101, 2));
            UT_ASSERT_BIT_EQUAL(0b1010000, BIT_SHF_LEF(0b00101, 4));
            UT_ASSERT_BIT_EQUAL(0b10000000000000000000000000000000, BIT_SHF_LEF(0b10001000000000000000000000000000, 4));
        } UT_GROUP_END;

        UT_GROUP_BEG(shf_vec) {
            UT_ASSERT_BIT_EQUAL(0b00010, BIT_SHF_VEC(0b00100, -1));
            UT_ASSERT_BIT_EQUAL(0b00101, BIT_SHF_VEC(0b10100, -2));
            UT_ASSERT_BIT_EQUAL(0b00001, BIT_SHF_VEC(0b10100, -4));

            UT_ASSERT_BIT_EQUAL(0b01000, BIT_SHF_VEC(0b00100, +1));
            UT_ASSERT_BIT_EQUAL(0b10100, BIT_SHF_VEC(0b00101, +2));
            UT_ASSERT_BIT_EQUAL(0b1010000, BIT_SHF_VEC(0b00101, +4));
            UT_ASSERT_BIT_EQUAL(0b10000000000000000000000000000000, BIT_SHF_LEF(0b10001000000000000000000000000000, +4));
        } UT_GROUP_END;

        UT_GROUP_BEG(cyc_lef) {
            UT_ASSERT_BIT_EQUAL(u32c(0b10001000000000000000000000000000), BIT_CYC_LEF(u32c(0b00001000100000000000000000000000), 4));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_LEF(u32c(0b00001000100000000000000000000000), 32));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_LEF(u32c(0b01000100000000000000000000000000), 29));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_LEF(u32c(0b10001000000000000000000000000000), 28));
        } UT_GROUP_END;

        UT_GROUP_BEG(cyc_rig) {
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_RIG(u32c(0b10001000000000000000000000000000), 4));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_RIG(u32c(0b00001000100000000000000000000000), 32));
            UT_ASSERT_BIT_EQUAL(u32c(0b01000100000000000000000000000000), BIT_CYC_RIG(u32c(0b00001000100000000000000000000000), 29));
            UT_ASSERT_BIT_EQUAL(u32c(0b10001000000000000000000000000000), BIT_CYC_RIG(u32c(0b00001000100000000000000000000000), 28));
        } UT_GROUP_END;

        UT_GROUP_BEG(cyc_vec) {
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_VEC(u32c(0b10001000000000000000000000000000), -4));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_VEC(u32c(0b00001000100000000000000000000000), -32));
            UT_ASSERT_BIT_EQUAL(u32c(0b01000100000000000000000000000000), BIT_CYC_VEC(u32c(0b00001000100000000000000000000000), -29));
            UT_ASSERT_BIT_EQUAL(u32c(0b10001000000000000000000000000000), BIT_CYC_VEC(u32c(0b00001000100000000000000000000000), -28));

            UT_ASSERT_BIT_EQUAL(u32c(0b10001000000000000000000000000000), BIT_CYC_VEC(u32c(0b00001000100000000000000000000000), +4));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_VEC(u32c(0b00001000100000000000000000000000), +32));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_VEC(u32c(0b01000100000000000000000000000000), +29));
            UT_ASSERT_BIT_EQUAL(u32c(0b00001000100000000000000000000000), BIT_CYC_VEC(u32c(0b10001000000000000000000000000000), +28));
        } UT_GROUP_END;

        UT_GROUP_BEG(mask_up) {
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000000), BIT_MASK_UP(u32c(0b00000000000000000000000000000000), u32c(0b00000000000000000000000000000000)));
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000001), BIT_MASK_UP(u32c(0b00000000000000000000000000000001), u32c(0b00000000000000000000000000000000)));
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000011), BIT_MASK_UP(u32c(0b00000000000000000000000000000001), u32c(0b00000000000000000000000000000011)));
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000011), BIT_MASK_UP(u32c(0b00000000000000000000000000000001), u32c(0b00000000000000000000000000000010)));
            UT_ASSERT_BIT_EQUAL(u32c(0b11100000011100011000100000000111), BIT_MASK_UP(u32c(0b00000000000000011000100000000000), u32c(0b11100000011100000000000000000111)));
        } UT_GROUP_END;

        UT_GROUP_BEG(mask_dw) {
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000000), BIT_MASK_DW(u32c(0b00000000000000000000000000000000), u32c(0b00000000000000000000000000000000)));
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000000), BIT_MASK_DW(u32c(0b00000000000000000000000000000001), u32c(0b00000000000000000000000000000000)));
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000001), BIT_MASK_DW(u32c(0b00000000000000000000000000000001), u32c(0b00000000000000000000000000000011)));
            UT_ASSERT_BIT_EQUAL(u32c(0b00000000000000000000000000000000), BIT_MASK_DW(u32c(0b00000000000000000000000000000001), u32c(0b00000000000000000000000000000010)));
        } UT_GROUP_END;
    } UT_GROUP_END;
}

